services:
  debugging-python:
    build:
      context: ./src
      dockerfile: Dockerfile
    container_name: datetime-api
    ports:
      - "8000:8000"
    volumes:
      # Mount source code for live debugging
      - ./src:/app
    environment:
      - PYTHONUNBUFFERED=1
      # Enable this for PyCharm remote debugging
      - PYCHARM_DEBUG=0
    command: ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload", "--log-level", "debug"]
    
  # Optional: Add a simple database for more complex debugging scenarios
  # postgres:
  #   image: postgres:15-alpine
  #   container_name: datetime-db
  #   environment:
  #     - POSTGRES_USER=dev
  #     - POSTGRES_PASSWORD=devpass
  #     - POSTGRES_DB=datetime_db
  #   ports:
  #     - "5432:5432"
  #   volumes:
  #     - postgres_data:/var/lib/postgresql/data

# volumes:
#   postgres_data:
